# ═══════════════════════════════════════════════════════════════════════════════
# TELEGRAM AI SAAS - Environment Configuration Template (CORRIGÉ)
# ═══════════════════════════════════════════════════════════════════════════════
# 
# ⚠️  IMPORTANT: Copy this file to .env and fill in the values!
# 
# To generate secure secrets, run:
#   bash scripts/generate-secrets.sh
#
# Or generate manually:
#   openssl rand -hex 32  # For 64-char hex strings
#   openssl rand -hex 16  # For 32-char hex strings
# ═══════════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════════
# SERVER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

NODE_ENV=development
HOST=0.0.0.0
PORT=3000
LOG_LEVEL=info

# ═══════════════════════════════════════════════════════════════════════════════
# DATABASE (PostgreSQL)
# ═══════════════════════════════════════════════════════════════════════════════
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
# 
# For docker-compose: postgres:5432
# For local dev: localhost:5432

POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_openssl_rand_hex_32
POSTGRES_DB=telegram_ai_saas

DATABASE_URL="postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432/telegram_ai_saas?schema=public"

# ═══════════════════════════════════════════════════════════════════════════════
# REDIS (Queue + Cache)
# ═══════════════════════════════════════════════════════════════════════════════
# For docker-compose: redis://redis:6379
# For local dev: redis://localhost:6379

REDIS_URL=redis://localhost:6379

# ═══════════════════════════════════════════════════════════════════════════════
# TELEGRAM BOT
# ═══════════════════════════════════════════════════════════════════════════════
# 
# 1. Get bot token from @BotFather on Telegram
# 2. Set webhook URL after deploying (must be HTTPS)
#
# Generate secure webhook secret:
#   openssl rand -hex 32

TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather
TELEGRAM_WEBHOOK_SECRET=openssl_rand_hex_32
TELEGRAM_WEBHOOK_URL=https://your-domain.com/api/telegram/webhook

# ═══════════════════════════════════════════════════════════════════════════════
# SECURITY SECRETS
# ═══════════════════════════════════════════════════════════════════════════════
# 
# ⚠️  CRITICAL: Change these in production!
# 
# Generate secure secrets:
#   openssl rand -hex 32  # For JWT_SECRET
#   openssl rand -hex 64  # For ENCRYPTION_KEY (64 chars = 32 bytes hex)

JWT_SECRET=openssl_rand_hex_64
ENCRYPTION_KEY=openssl_rand_hex_64
SESSION_SECRET=openssl_rand_hex_64

# ═══════════════════════════════════════════════════════════════════════════════
# LEMON SQUEEZY (Payments)
# ═══════════════════════════════════════════════════════════════════════════════
# 
# Sign up: https://lemonsqueezy.com
# Create API key in Settings > API
# 
# IMPORTANT: docker-compose uses LEMON_API_KEY, LEMON_WEBHOOK_SECRET, LEMON_STORE_ID

LEMON_API_KEY=your_lemon_squeezy_api_key
LEMON_WEBHOOK_SECRET=openssl_rand_hex_32
LEMON_STORE_ID=your_store_id

# ═══════════════════════════════════════════════════════════════════════════════
# OLLAMA (Local AI - Optional)
# ═══════════════════════════════════════════════════════════════════════════════
# 
# Install Ollama: https://ollama.ai
# Pull a model: ollama pull llama3

OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3

# ═══════════════════════════════════════════════════════════════════════════════
# OPENAI (Optional - Client Brings Own Key)
# ═══════════════════════════════════════════════════════════════════════════════
# 
# Get API key from: https://platform.openai.com/api-keys

# OPENAI_API_KEY=sk-...

# ═══════════════════════════════════════════════════════════════════════════════
# BRAVE SEARCH (Optional - Client Brings Own Key)
# ═══════════════════════════════════════════════════════════════════════════════
# 
# Get API key from: https://brave.com/search/api

# BRAVE_API_KEY=BSA...

# ═══════════════════════════════════════════════════════════════════════════════
# CORS & DOMAIN
# ═══════════════════════════════════════════════════════════════════════════════

CORS_ORIGINS=http://localhost:3000,http://localhost:5173
DOMAIN=localhost

# ═══════════════════════════════════════════════════════════════════════════════
# RATE LIMITS
# ═══════════════════════════════════════════════════════════════════════════════

RATE_LIMIT_MESSAGES=100
RATE_LIMIT_API_KEYS=10
RATE_LIMIT_WEB_SEARCH=50

# ═══════════════════════════════════════════════════════════════════════════════
# OPTIONAL: SENTRY (Error tracking)
# ═══════════════════════════════════════════════════════════════════════════════

# SENTRY_DSN=

# ═══════════════════════════════════════════════════════════════════════════════
# OPTIONAL: REPLICATION (Disaster Recovery)
# ═══════════════════════════════════════════════════════════════════════════════

# POSTGRES_REPLICATION_PASSWORD=openssl_rand_hex_32
